# Fruit Basket Game

–ü—Ä–æ—Å—Ç–∞—è 2D –∏–≥—Ä–∞ –Ω–∞ Cocos Creator —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π ECS (Entity-Component-System).

---

## üéÆ –û –ø—Ä–æ–µ–∫—Ç–µ

–ò–≥—Ä–∞ —Ç–∏–ø–∞ "–ª–æ–≤–ª—è –ø–∞–¥–∞—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤" —Å –∫–æ—Ä–∑–∏–Ω–æ–π. –ò–≥—Ä–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ—Ä–∑–∏–Ω–æ–π, —Å–æ–±–∏—Ä–∞–µ—Ç —Ñ—Ä—É–∫—Ç—ã –¥–ª—è –æ—á–∫–æ–≤ –∏ –∏–∑–±–µ–≥–∞–µ—Ç –æ–ø–∞—Å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Cocos Creator 3.8.7
- TypeScript (strict mode)
- Miniplex (ECS library)
- InversifyJS (DI container)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
assets/
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    # –°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Cocos integration)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ di/                 # Dependency Injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ helpers/            # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã (–∞–¥–∞–ø—Ç–µ—Ä—ã, —Ä–æ—É—Ç–µ—Ä—ã)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interfaces/         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameController.ts   # –ì–ª–∞–≤–Ω—ã–π Cocos –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameEngine.ts       # ECS –¥–≤–∏–∂–æ–∫ (—Ñ–∞—Å–∞–¥)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AudioManager.ts     # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è Cocos Audio API
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ecs/                    # ECS —Å–ª–æ–π (—á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/         # Data-only –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ systems/            # –°–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ trajectories/   # –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π –¥–≤–∏–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ factories/          # –§–∞–±—Ä–∏–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–∏—Å—Ç–µ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interfaces/         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ECS —Å–ª–æ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts            # –¢–∏–ø—ã ECS (GameWorld, GameEntity)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NodeRegistry.ts     # –†–µ–µ—Å—Ç—Ä —Å–≤—è–∑–∏ entity <-> Cocos Node
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NodeRenderer.ts     # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ domain/                 # –î–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/           # –î–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ interfaces/     # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/             # Event Bus –∏ —Å–æ–±—ã—Ç–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ state/              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ interfaces/         # –î–æ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameConfig.ts       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ defaultConfig.ts    # –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MathConstants.ts    # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ui/                     # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Cocos Components)
‚îÇ   ‚îî‚îÄ‚îÄ utils/                  # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ prefabs/                    # Cocos prefabs
‚îú‚îÄ‚îÄ sprites/                    # –°–ø—Ä–∞–π—Ç—ã –∏ –∞—Ç–ª–∞—Å—ã
‚îî‚îÄ‚îÄ audio/                      # –ó–≤—É–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **ECS (Entity-Component-System) –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∏—Å—Ç–æ–π ECS —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π Miniplex –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏–∫–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Äî —á–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∏–∫–∞–∫–æ–π –ª–æ–≥–∏–∫–∏)
- –°–∏—Å—Ç–µ–º—ã ‚Äî —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ (—Ä–∞–±–æ—Ç–∞—é—Ç —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏)
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ queries

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äî —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
interface PositionComponent {
  position: { x: number; y: number };
}

// –°–∏—Å—Ç–µ–º–∞ ‚Äî —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫–∞
class MovementSystem implements ISystem {
  update(deltaTime: number) {
    for (const entity of this.world.with('position', 'velocity')) {
      entity.position.x += entity.velocity.x * deltaTime;
    }
  }
}
```

---

### 2. **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤ (Layered Architecture)**

**–†–µ—à–µ–Ω–∏–µ:** –¢—Ä–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–ª–æ—è —Å –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     UI      ‚îÇ  ‚Üê Cocos Components (—Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     App     ‚îÇ  ‚Üê –ê–¥–∞–ø—Ç–µ—Ä—ã, –º–æ—Å—Ç—ã, DI (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Domain     ‚îÇ  ‚Üê –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     ECS     ‚îÇ  ‚Üê –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (—á–∏—Å—Ç–∞—è ECS)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- Domain –∏ ECS —Å–ª–æ–∏ –Ω–µ –∑–Ω–∞—é—Ç –æ Cocos Creator
- –ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å Cocos –Ω–∞ –¥—Ä—É–≥–æ–π –¥–≤–∏–∂–æ–∫ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

---

### 3. **Dependency Injection –±–µ–∑ Singletons**

**–†–µ—à–µ–Ω–∏–µ:** –Ø–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤–º–µ—Å—Ç–æ singleton scope.

**–ü—Ä–∏–º–µ—Ä:**
```typescript
export const createGameContainer = (config: GameConfig): Container => {
  const eventBus = new SimpleGameEventBus();
  const scoreService = new DefaultScoreService(gameState, eventBus);
  
  container.bind<ScoreService>(TYPES.ScoreService)
    .toConstantValue(scoreService); // ‚úÖ Fresh instance per container
};
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ö–∞–∂–¥–∞—è –∏–≥—Ä–æ–≤–∞—è —Å–µ—Å—Å–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ù–µ—Ç —Å–∫—Ä—ã—Ç–æ–≥–æ shared state

---

### 4. **Factory Pattern –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º**

**–†–µ—à–µ–Ω–∏–µ:** `SystemFactory` —Å–æ–∑–¥–∞–µ—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –≤—Å–µ ECS —Å–∏—Å—Ç–µ–º—ã.

**–ü—Ä–∏–º–µ—Ä:**
```typescript
class GameEngine {
  constructor(context, options) {
    const systems = SystemFactory.createAndRegisterSystems(
      this.pipeline,
      { world, context, ... }
    );
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- GameEngine –Ω–µ –∑–Ω–∞–µ—Ç –æ –¥–µ—Ç–∞–ª—è—Ö —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —Å–∏—Å—Ç–µ–º—ã
- –ú–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω—è—Ç—å —Ñ–∞–±—Ä–∏–∫—É –¥–ª—è —Ç–µ—Å—Ç–æ–≤

---

### 5. **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–≤—è–∑–∫–∏ ECS –∏ UI**

**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `IRenderer`, `IAudioPlayer` –º–µ–∂–¥—É ECS –∏ Cocos.

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// ECS —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
class VisualSyncSystem {
  constructor(
    private world: GameWorld,
    private renderer: IRenderer  // ‚Üê –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  ) {}
  
  update() {
    for (const entity of this.targets) {
      this.renderer.setPosition(entity.nodeId, entity.position.x, entity.position.y);
    }
  }
}

// Cocos –∞–¥–∞–ø—Ç–µ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
class NodeRenderer implements IRenderer {
  setPosition(nodeId: number, x: number, y: number) {
    const node = this.nodeRegistry.get(nodeId);
    node.setPosition(x, y);
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ECS —Å–∏—Å—Ç–µ–º—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç Cocos API
- –ú–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- Dependency Inversion Principle

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. **Miniplex compatibility workaround**

**–ö–æ–¥:**
```typescript
import * as miniplex from 'miniplex';
const WorldCtor = miniplex.World ?? (miniplex as any).default?.World;
return new WorldCtor() as GameWorld;
```

**–ü–æ—á–µ–º—É:**
- Cocos Creator –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å–±–æ—Ä–∫–∏ –º–æ–¥—É–ª–µ–π
- Miniplex –∏–º–µ–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ (ESM/CommonJS)
- –ü—Ä—è–º–æ–π –∏–º–ø–æ—Ä—Ç `import { World }` –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ module resolution

**–ü–æ—á–µ–º—É —ç—Ç–æ OK:**
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–æ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (`createWorld.ts`)
- –°–∫—Ä—ã—Ç–æ –∑–∞ —Ñ–∞–±—Ä–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Cocos/Miniplex –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —á–∏—Å—Ç—ã–π –∏–º–ø–æ—Ä—Ç.

---

### 2. **GameController —Ä–∞–∑–º–µ—Ä (326 —Å—Ç—Ä–æ–∫)**

**–ß—Ç–æ:** GameController –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π.

**–ü–æ—á–µ–º—É —ç—Ç–æ OK –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ:**
- –Ø–≤–ª—è–µ—Ç—Å—è **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞** –¥–ª—è Cocos
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ 5+ –∫–ª–∞—Å—Å–æ–≤ —É–≤–µ–ª–∏—á–∏—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –±–µ–∑ —è–≤–Ω–æ–π –ø–æ–ª—å–∑—ã
- –í—Å–µ –º–µ—Ç–æ–¥—ã –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω—ã (lifecycle Cocos –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

**–ü–ª–∞–Ω –Ω–∞ –±—É–¥—É—â–µ–µ:**
- –ü—Ä–∏ —Ä–æ—Å—Ç–µ –¥–æ 350+ —Å—Ç—Ä–æ–∫ —Ä–∞–∑–±–∏—Ç—å –Ω–∞:
  - `SceneConfigurator` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ bounds
  - `NodeSpawner` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ prefabs
  - `EngineBootstrapper` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ECS
  - `InputBridge` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–≤–æ–¥–æ–º
  - `GameLifecycleManager` ‚Äî start/stop/restart

---

### 3. **GameContext –∫–∞–∫ "God Object"**

**–ß—Ç–æ:** `GameContext` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç 6+ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç.

```typescript
interface GameContext {
  config: GameConfig;
  events: GameEventBus;
  state: GameState;
  score: ScoreService;
  lives: LifeService;
  timer: TimerService;
  audio: AudioService;
  flow: GameFlowService;
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ OK:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è **–ø–µ—Ä–µ–¥–∞—á–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã**
- –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏ (pure data holder)
- –£–¥–æ–±–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ `GameEngine` –∏ `SystemFactory`
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —è–≤–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** Builder pattern –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∞ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ (8 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) ‚Äî –±–æ–ª–µ–µ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω–æ –±–µ–∑ —è–≤–Ω–æ–π –ø–æ–ª—å–∑—ã.

---

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ inversify –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö**

**–ß—Ç–æ:** –°–µ—Ä–≤–∏—Å—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `@injectable()` –∏ `@inject()`.

**–ü–æ—á–µ–º—É —ç—Ç–æ –æ–∫:**
- –ò–∑–±–µ–≥–∞–µ–º **magic** –∏ **reflection** –≤ runtime
- –Ø–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤ `createContainer.ts`
- –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç inversify (–º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å DI)
- –ù–µ—Ç singleton scope –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã ‚Äî –Ω–æ —Ç–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `.inSingletonScope()` –∏–ª–∏ `.inTransientScope()`, —á—Ç–æ –º–µ–Ω–µ–µ —è–≤–Ω–æ.

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   ```bash
   npm install
   ```

2. **–û—Ç–∫—Ä—ã—Ç—å –≤ Cocos Creator:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å Cocos Creator
   - Open Project ‚Üí –≤—ã–±—Ä–∞—Ç—å –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É:**
   - –í Cocos Creator –Ω–∞–∂–∞—Ç—å Play (‚ñ∂Ô∏è)
   - –ò–ª–∏ F5 –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

## üîÑ –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
- –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è ECS —Å–∏—Å—Ç–µ–º

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- –†–∞–∑–±–∏—Ç—å GameController –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤
- –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å `app/helpers/` –≤ `app/adapters/`, `app/bridges/`
- –ó–∞–º–µ–Ω–∏—Ç—å GameContext –Ω–∞ Builder pattern

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (—É–ª—É—á—à–µ–Ω–∏—è):**
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π (–ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è, —Å–ø–∏—Ä–∞–ª—å–Ω–∞—è)
- –î–æ–±–∞–≤–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é —Ñ–∏–∑–∏–∫–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã —Å —Ñ—Ä—É–∫—Ç–æ–≤ –∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ—Ç—Å–∫–æ–∫–∞–º–∏/–ª–æ–≤–ª–µ–π
- –í–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—Ä—É–∫—Ç–æ–≤ —Å –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ–º –ø–æ —à–∫–∞–ª–µ —É—Ä–æ–≤–Ω–µ–π

---

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **ECS –ø–∞—Ç—Ç–µ—Ä–Ω:** [Miniplex –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://miniplex.dev/)
- **DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:** [InversifyJS](https://inversify.io/)

